// app/views/comments/create.js.erb
// Here you will write *javascript* that would be executed by the browser
<% if @comment.errors.any? %>
  // Render new comment form with errors
  $('#new_comment').html("<%= j render 'comments/form', evaluation: evaluation %>");
<% else %>
  // Create a paragraph for the new comment. But hide it.
  var new_comment = $("<%= j render 'comments/show', comment: @comment %>").hide();
  //alert(<%= @comment.content %>);
  // Add it to the DOM, at the end of the existing comments. It's still hidden.
  $('#comments-<%= @evaluation.id %>').append(new_comment);
  // Show the new comment with an animation!
  new_comment.slideDown();
  // Remove the text from the content textarea.
  $('#edit-form-<%= @comment.id %>').hide();
  $('#new-comment-form-<%= @evaluation.id %>').slideUp();
  $('#new-form-button-<%= @evaluation.id %>' ).slideDown();
  $('#comment_content').val('');

<% end %>